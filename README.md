# Working skeleton to start a backend for your pet project in kotlin

Working skeleton for an application with the following libraries, configuration, and
examples:
- Spring boot 3.x
- junit 5, junit 4 and Cucumber, Jacoco
- kotlin tests and freeSpecs tests
- Integration of H2 in memory
- Integration of SQLite with Spring boot
- ktlint, detekt and precommits
- CI/CD with Github actions
- Integration of Sonarqube
- Deployment in Azure webapp
- Docker image, github actions and deployment it in the container register
- Environment configuration
- Wiremock example
- Swagger (OpenApi)
- Logs
- GraphQL example with apollo and Spring boot

You have examples of tests (only examples to start and understand the technology)

# Description of the folders and files

- .github : workflow for github actions with CI/CD. Deployment in Azure webapp
- config: detket.yml => here you could create rules for detket. Now empty
- scripts: pre-commit script used in every commit
- .env: file with the environment variables (examples)
- build.gradle: the file with the tasks you can use and dependencies. Tasks:
  - installGitHook => allow you to install the pre-commit
  - test => executing cucumber and all the kind of tests
  - ktlintFormat => ktlint (linter)
  - jacocoTestReport => you can create coverage reports with Jacoco
  - jacocoTestCoverageVerification => verification of rules with Jacoco
  - sonar => execute sonarqube
  - detekt => execute detekt (linter)
- mysqlite.sqlite => db autogenerated when you activate SQLite
- start.sh => script to start the service in the docker image (basic configuration, the same you do in local)
- src
  - main.kotlin.com.
    - shoppinglist => some dummy examples for the test examples
      - application.dummy => Dummy service, controller, repository and entity for spring boot examples
      - location => Dummy DTOs for graphql examples
    - common. An exension to use the logs
    - configuration. Example for consuming enviroment variables from spring boot
    - resources
      - db.migration: for flyaway and migration (To be developed)
      - graphql => example with types, queries and mutations for graphql
      - application.properties => properties for spring boot:
        - Security
        - Consume enviroment variables from the .env
        - configuration of DB depending of the .env
        - configuration of graphql
      - logback-spring.xml => configuration of logs
    - test ==> examples with tests 
      - resources=> dummy example for BDD (.feature)
      - com.shoppinglist
        - acceptance: configuration of cucumber for acceptance tests and combination with Spring boot
        - application: classic spring boot end to tests and other similar examples with FreeSpec and GraphQL.
          - Example consuming enviroment variables from the tests
        - controllers: classic example of test for controllers in spring boot
          - Example with Mockk
        - integration: example with JPA (test of DB) and Wiremock (test of external services)
        - unit: examples of unit tests:
          - using Free Specs framework (kotest)
          - Free specs but with the context of Spring 
          - Junit Jupiter
          - JUnit Jupiter with the context of spring